# è™šæ‹Ÿæ‘‡æ† UI è®¾è®¡è¯´æ˜

## è®¾è®¡ç†å¿µ

åŸºäº **å±‚æ¬¡æ„Ÿã€å¯è¯»æ€§ã€æ–¹å‘æ€§** ä¸‰å¤§åŸåˆ™ï¼Œé‡æ–°è®¾è®¡è™šæ‹Ÿæ‘‡æ†å¯è§†åŒ–ç•Œé¢ã€‚

---

## è§†è§‰å±‚æ¬¡ï¼ˆä»å¤–åˆ°å†…ï¼‰

### 1ï¸âƒ£ åœ†å½¢è¾¹ç•Œï¼ˆæœ€å¤–å±‚ï¼‰
- **å­—ç¬¦**: `â—¯` (Unicode åœ†åœˆ)
- **é¢œè‰²**: `dim blue` (æ·±è“è‰²ï¼Œä½å¯¹æ¯”åº¦)
- **ç”¨é€”**: å®šä¹‰æ‘‡æ†æ´»åŠ¨èŒƒå›´
- **ç®—æ³•**: è·ç¦»ä¸­å¿ƒ = `sqrt(xÂ² + yÂ²)` â‰ˆ åŠå¾„ size

```python
dist_from_center = (x**2 + y**2) ** 0.5
if abs(dist_from_center - size) < 0.8:
    # ç»˜åˆ¶åœ†å½¢è¾¹ç•Œ
```

### 2ï¸âƒ£ ä¸­å¿ƒåå­—ï¼ˆä¸­é—´å±‚ï¼‰
- **å­—ç¬¦**: `â”¼` (äº¤å‰) / `â”‚` (ç«–çº¿) / `â”€` (æ¨ªçº¿)
- **é¢œè‰²**: `dim white` (æš—ç°è‰²)
- **ç”¨é€”**: æ ‡è®°ä¸­å€¼ä½ç½®ï¼ˆ1024ï¼‰
- **æ”¹è¿›ç‚¹**: ä½¿ç”¨æ›´ç»†è…»çš„ Unicode å­—ç¬¦ï¼Œæ›¿æ¢ç²—ç³™çš„ ASCII `â•‹`

### 3ï¸âƒ£ æ‘‡æ†ä½ç½®æŒ‡ç¤ºå™¨ï¼ˆæœ€å†…å±‚ï¼Œæœ€é†’ç›®ï¼‰
- **å°ºå¯¸**: 3x3 åƒç´ åŒºåŸŸï¼ˆ`abs(x - x_pos) <= 1`ï¼‰
- **é¢œè‰²/å­—ç¬¦**: æ ¹æ®åç§»é‡åŠ¨æ€å˜åŒ–

---

## é¢œè‰²æ–¹æ¡ˆï¼ˆæ¸è¿›å¼ï¼‰

### ğŸ“ ä¸­å¿ƒåŒºåŸŸï¼ˆåç§»é‡ < 10%ï¼‰
- **å­—ç¬¦**: `â—` (åœ†ç‚¹)
- **é¢œè‰²**: `bold yellow` (äº®é»„è‰²)
- **å«ä¹‰**: æ‘‡æ†åœ¨ä¸­å€¼ä½ç½®ï¼ˆå‡ ä¹æ— åç§»ï¼‰

```python
offset_magnitude = sqrt(x_percentÂ² + y_percentÂ²)
if offset_magnitude < 10:
    Text("â—", style="bold yellow")
```

### ğŸ“ ä¸­ç­‰åç§»ï¼ˆ10% â‰¤ åç§»é‡ < 50%ï¼‰
- **å­—ç¬¦**: `â—†` (è±å½¢)
- **é¢œè‰²**:
  - **æ­£å‘**ï¼ˆå‘ä¸Š/å‘å³ï¼‰: `bold green` (äº®ç»¿è‰²)
  - **è´Ÿå‘**ï¼ˆå‘ä¸‹/å‘å·¦ï¼‰: `bold red` (äº®çº¢è‰²)
- **å«ä¹‰**: å¸¸è§„æ“ä½œèŒƒå›´

```python
elif offset_magnitude < 50:
    if x_percent > 0 or y_percent > 0:
        Text("â—†", style="bold green")  # æ­£å‘
    else:
        Text("â—†", style="bold red")    # è´Ÿå‘
```

### ğŸ“ å¤§åç§»ï¼ˆåç§»é‡ â‰¥ 50%ï¼‰
- **å­—ç¬¦**: `â–ˆ` (å®å¿ƒæ–¹å—)
- **é¢œè‰²**:
  - **æ­£å‘**: `bold bright_green` (è¶…äº®ç»¿è‰²)
  - **è´Ÿå‘**: `bold bright_red` (è¶…äº®çº¢è‰²)
- **å«ä¹‰**: æé™æ“ä½œï¼ˆæ¥è¿‘æœ€å¤§/æœ€å°å€¼ï¼‰

```python
else:  # offset_magnitude >= 50
    if x_percent > 0 or y_percent > 0:
        Text("â–ˆ", style="bold bright_green")
    else:
        Text("â–ˆ", style="bold bright_red")
```

---

## æŠ€æœ¯å®ç°

### Rich Text å¯¹è±¡æ¸²æŸ“
ä½¿ç”¨ `Text` å¯¹è±¡ä»£æ›¿çº¯å­—ç¬¦ä¸²ï¼Œæ”¯æŒ ANSI é¢œè‰²ï¼š

```python
line_parts = []  # æ¯ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ª Text å¯¹è±¡
for x in range(-size, size + 1):
    if condition:
        line_parts.append(Text("â—", style="bold yellow"))
    else:
        line_parts.append(Text(" "))

# åˆå¹¶ä¸ºä¸€è¡Œ
line_text = Text()
for part in line_parts:
    line_text.append(part)
lines.append(line_text)

# ä½¿ç”¨ Rich Group ç»„åˆå¤šè¡Œ
joystick_display = RichGroup(*lines)
```

### åœ†å½¢è¾¹ç•Œç®—æ³•
ä½¿ç”¨æ•°å­¦è·ç¦»å…¬å¼ + å®¹å·®ï¼ˆ0.8ï¼‰ç»˜åˆ¶åœ†å½¢ï¼š

```python
dist_from_center = (x**2 + y**2) ** 0.5
if abs(dist_from_center - size) < 0.8:
    # è¿™ä¸ªç‚¹åœ¨åœ†å‘¨ä¸Š
```

**ä¸ºä»€ä¹ˆæ˜¯ 0.8ï¼Ÿ**
- å­—ç¬¦ç½‘æ ¼æ˜¯ç¦»æ•£çš„ï¼ˆæ•´æ•°åæ ‡ï¼‰
- å®¹å·®å¤ªå°ï¼ˆå¦‚ 0.5ï¼‰â†’ åœ†åœˆä¸è¿ç»­
- å®¹å·®å¤ªå¤§ï¼ˆå¦‚ 1.5ï¼‰â†’ åœ†åœˆå˜ç²—

---

## å¯¹æ¯”ï¼šæ”¹è¿›å‰ vs æ”¹è¿›å

| å…ƒç´  | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ç‚¹ |
|------|--------|--------|--------|
| **è¾¹ç•Œ** | æ—  | `â—¯` (è“è‰²åœ†åœˆ) | æ¸…æ™°å®šä¹‰æ´»åŠ¨èŒƒå›´ |
| **ä¸­å¿ƒ** | `â•‹` `â”‚` `â”€` (ç²—ç³™) | `â”¼` `â”‚` `â”€` (ç»†è…») + æš—è‰² | æ›´ç²¾è‡´ï¼Œä½å¹²æ‰° |
| **æ‘‡æ†** | `â—` / `â–ˆ` (å•è‰²) | `â—` / `â—†` / `â–ˆ` (æ¸å˜è‰²) | æ–¹å‘æ€§ + è§†è§‰åé¦ˆ |
| **é¢œè‰²** | æ—  | é»„è‰²(ä¸­å¿ƒ) / ç»¿è‰²(æ­£) / çº¢è‰²(è´Ÿ) | ç›´è§‚åŒºåˆ†çŠ¶æ€ |

---

## å®é™…æ•ˆæœç¤ºä¾‹

### ä¸­å¿ƒä½ç½®ï¼ˆä¸­å€¼ 1024ï¼‰
```
    â—¯â—¯â—¯â—¯â—¯â—¯â—¯â—¯â—¯
   â—¯â—¯â—¯â—¯ â”‚ â—¯â—¯â—¯â—¯
  â—¯â—¯â—¯    â”‚    â—¯â—¯â—¯
 â—¯        â”‚        â—¯
 â—¯â”€â”€â”€â”€â”€â”€â”€â”€â—â—â—â”€â”€â”€â”€â”€â”€â”€â”€â—¯  â† äº®é»„è‰² â—
 â—¯        â”‚        â—¯
  â—¯â—¯â—¯    â”‚    â—¯â—¯â—¯
```

### ä¸­ç­‰åç§»ï¼ˆå‘å³ä¸Šï¼Œç»¿è‰²ï¼‰
```
    â—¯â—¯â—¯â—¯â—¯â—¯â—¯â—¯â—¯
   â—¯â—¯â—¯â—¯ â”‚ â—¯â—¯â—¯â—¯
  â—¯â—¯â—¯    â”‚ â—†â—†â—†â—¯â—¯â—¯  â† ç»¿è‰² â—†
 â—¯        â”‚ â—†â—†â—†    â—¯
 â—¯â”€â”€â”€â”€â”€â”€â”€â”€â”¼ â—†â—†â—†â”€â”€â”€â”€â—¯
 â—¯        â”‚        â—¯
```

### æé™åç§»ï¼ˆå‘å·¦ä¸‹ï¼Œäº®çº¢è‰²ï¼‰
```
    â—¯â—¯â—¯â—¯â—¯â—¯â—¯â—¯â—¯
   â—¯â—¯â—¯â—¯ â”‚ â—¯â—¯â—¯â—¯
  â—¯â—¯â—¯    â”‚    â—¯â—¯â—¯
 â—¯        â”‚        â—¯
 â—¯â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â—¯
 â—¯â–ˆâ–ˆâ–ˆ     â”‚        â—¯  â† äº®çº¢è‰² â–ˆ
  â–ˆâ–ˆâ–ˆ     â”‚     â—¯â—¯â—¯
```

---

## è®¾è®¡å†³ç­–è§£é‡Š

### Q1: ä¸ºä»€ä¹ˆç”¨ `â—†` è€Œä¸æ˜¯ `â—`ï¼Ÿ
**A**: åŒºåˆ†çŠ¶æ€å±‚æ¬¡ï¼š
- `â—` (åœ†ç‚¹) = ä¸­å¿ƒï¼ˆä¸­å€¼ï¼‰
- `â—†` (è±å½¢) = ä¸­ç­‰åç§»
- `â–ˆ` (æ–¹å—) = æé™åç§»

å­—ç¬¦å½¢çŠ¶å˜åŒ– + é¢œè‰²å˜åŒ– = åŒé‡è§†è§‰åé¦ˆ

### Q2: ä¸ºä»€ä¹ˆç”¨åœ†å½¢è¾¹ç•Œï¼Ÿ
**A**:
- çœŸå®æ‘‡æ†æ˜¯åœ†å½¢çš„ï¼ˆç¬¦åˆç‰©ç†ç›´è§‰ï¼‰
- æ¸…æ™°å®šä¹‰æ´»åŠ¨èŒƒå›´ï¼ˆé¿å…è¶Šç•Œè¯¯è§£ï¼‰
- ç¾è§‚æ€§æå‡ï¼ˆvs æ–¹å½¢ç½‘æ ¼ï¼‰

### Q3: ä¸ºä»€ä¹ˆä¸­å¿ƒåå­—ç”¨æš—è‰²ï¼Ÿ
**A**:
- èƒŒæ™¯å‚è€ƒçº¿ï¼Œä¸åº”æŠ¢å¤ºæ³¨æ„åŠ›
- é™ä½è§†è§‰å™ªéŸ³ï¼Œçªå‡ºæ‘‡æ†ä½ç½®
- ä¿æŒå¯è§æ€§çš„åŒæ—¶å‡å°‘å¹²æ‰°

### Q4: ä¸ºä»€ä¹ˆæ­£å‘ç”¨ç»¿è‰²ã€è´Ÿå‘ç”¨çº¢è‰²ï¼Ÿ
**A**:
- é€šç”¨ç›´è§‰ï¼šç»¿è‰² = å‰è¿›/ä¸Šå‡ï¼Œçº¢è‰² = åé€€/ä¸‹é™
- å¿«é€Ÿè¯†åˆ«ï¼šæ— éœ€çœ‹æ•°å€¼ï¼Œé¢œè‰²å³å¯åˆ¤æ–­æ–¹å‘
- ç¬¦åˆæ— äººæœºæ“ä½œä¹ æƒ¯

---

## æµ‹è¯•æ–¹æ³•

### è¿è¡Œé¢„è§ˆæµ‹è¯•
```bash
python test_joystick_ui.py
```

### è¿è¡Œå®Œæ•´äº¤äº’ç•Œé¢
```bash
python utils/keyboard.py
```

### æµ‹è¯•åœºæ™¯
1. ä¸­å¿ƒä½ç½® â†’ é»„è‰² `â—`
2. å°å¹…ç§»åŠ¨ â†’ ç»¿è‰²/çº¢è‰² `â—†`
3. å¤§å¹…ç§»åŠ¨ â†’ äº®ç»¿è‰²/äº®çº¢è‰² `â–ˆ`
4. æé™ä½ç½® â†’ è¾¹ç•Œé™„è¿‘çš„ `â–ˆ`
5. å¯¹è§’çº¿ç§»åŠ¨ â†’ åŒæ—¶æ˜¾ç¤º X/Y è½´åç§»

---

## æ€§èƒ½ä¼˜åŒ–

### ä½¿ç”¨ Rich Text çš„æ€§èƒ½å½±å“
- **CPU æ¶ˆè€—**: æ¯å¸§æ¸²æŸ“ 441 ä¸ªå­—ç¬¦ï¼ˆ21x21 ç½‘æ ¼ï¼‰
- **åˆ·æ–°ç‡**: 20Hzï¼ˆæ¯ 50ms æ›´æ–°ä¸€æ¬¡ï¼‰
- **å¼€é”€**: Rich Text å¯¹è±¡åˆ›å»º + ANSI è½¬ä¹‰åºåˆ—

**ä¼˜åŒ–ç­–ç•¥**:
- ç¼“å­˜ä¸å˜çš„è¾¹ç•Œå­—ç¬¦ï¼ˆå¯é€‰ï¼‰
- å‡å°‘ Text å¯¹è±¡åˆ›å»ºï¼ˆå½“å‰æ¯æ¬¡é‡å»ºï¼‰
- å¦‚æœå¡é¡¿ï¼Œå¯é™ä½ `update_interval` (é»˜è®¤ 0.05s)

---

## æœªæ¥æ”¹è¿›æ–¹å‘

1. **æ¸å˜è‰²æ”¯æŒ**: æ ¹æ®åç§»ç™¾åˆ†æ¯”ä½¿ç”¨è¿ç»­è‰²è°±ï¼ˆéœ€è¦ True Color æ”¯æŒï¼‰
2. **è¿åŠ¨è½¨è¿¹**: æ˜¾ç¤ºå†å²è·¯å¾„ï¼ˆæ·¡åŒ–çš„æ—§ä½ç½®ï¼‰
3. **åŠ¨æ€è¾¹ç•Œ**: æ ¹æ®å®é™…æœ€å¤§æ†é‡åŠ¨æ€è°ƒæ•´åœ†å½¢å¤§å°
4. **ASCII é™çº§æ¨¡å¼**: å¯¹ä¸æ”¯æŒ Unicode çš„ç»ˆç«¯æä¾›çº¯ ASCII å¤‡é€‰æ–¹æ¡ˆ

---

## æ€»ç»“

æ–°è®¾è®¡é€šè¿‡ **åˆ†å±‚æ¸²æŸ“ + æ¸è¿›å¼é¢œè‰² + ç¬¦å·è¯­ä¹‰åŒ–**ï¼Œæ˜¾è‘—æå‡äº†è™šæ‹Ÿæ‘‡æ†çš„å¯è¯»æ€§å’Œç¾è§‚åº¦ï¼ŒåŒæ—¶ä¿æŒäº† TUI åº”ç”¨çš„æ€§èƒ½è¦æ±‚ã€‚

**æ ¸å¿ƒæ”¹è¿›**:
- âœ… åœ†å½¢è¾¹ç•Œï¼ˆæ¸…æ™°å®šä¹‰èŒƒå›´ï¼‰
- âœ… æ¸å˜è‰²æŒ‡ç¤ºå™¨ï¼ˆé»„â†’ç»¿/çº¢â†’äº®ç»¿/äº®çº¢ï¼‰
- âœ… ç¬¦å·è¯­ä¹‰åŒ–ï¼ˆ`â—` / `â—†` / `â–ˆ`ï¼‰
- âœ… ä½å¹²æ‰°èƒŒæ™¯ï¼ˆæš—è‰²åå­—ï¼‰
- âœ… é›¶æ–°å¢ä¾èµ–ï¼ˆä»…ç”¨ Rich å·²æœ‰åŠŸèƒ½ï¼‰

---

**è®¾è®¡ä½œè€…**: Claude (AI UI Designer)
**å®ç°æ—¥æœŸ**: 2025-10-25
**æŠ€æœ¯æ ˆ**: Python 3 + Textual + Rich
